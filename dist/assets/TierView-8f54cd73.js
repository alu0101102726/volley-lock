import"./sortable.esm-9c3c89c5.js";import{_ as f,g as p,r as h,o as u,c as v,b as g,t as y,F as b,e as w,f as _,d as k}from"./index-98e0f495.js";const S={data(){return{project:"default",listName:"VolleyLock",images:{},loading:!1}},mounted:async function(){const r=await(await fetch("https://volley-ranking-server.onrender.com/info")).json();let c=await(await fetch("https://volley-ranking-server.onrender.com/votes")).json();const a=await p();let i={};r.forEach((o,t)=>{let e=JSON.parse(o),n=new Image(100,85);n.src=e.photo,n.style.pointerEvents="none",n.alt=e.name,i[n.alt]=e.photo}),c.forEach(o=>{const t=JSON.parse(o);t.id==a.uid&&Object.keys(t.data).forEach(e=>{const n=t.data[e],m=document.querySelector(`.label${n}`);let d=new Image(96,96);d.src=i[e],d.style.pointerEvents="none",d.alt=e,m.appendChild(d)})}),this.images=i},methods:{async fetchPostVotes(s){const r=await p();s.id=r.uid;let l="https://volley-ranking-server.onrender.com/vote";const c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},mode:"no-cors",body:JSON.stringify(s)};await fetch(l,c)},modifyJSON(s){this.loading=!1,this.fetchPostVotes(s)},sendInformation(){this.loading=!0;let s={data:{}};document.querySelectorAll(".list-group").forEach((l,c)=>{const a=l.querySelector(".level").value,i=l.querySelector(".sort").childNodes;for(let o=0;o<i.length;o++){let t=i[o],e=0;switch(a){case"S":e=6;break;case"A":e=5;break;case"B":e=4;break;case"C":e=3;break;case"D":e=2;break;case"E":e=1;break}s.data[`${t.alt}`]=e}}),this.$swal({title:"¿Seguro que quieres registrar los datos?",text:"Una vez mandado no podrás volver a votar",icon:"warning",showCancelButton:!0}).then(l=>{l.isConfirmed?(this.$swal("Enviado!","","success"),this.modifyJSON(s)):this.$swal("Puedes seguir editando!","","info")})}}},x={class:"tier-list"},E=k('<div class="list-group row"><input type="text" value="S" class="tier6 level" readonly><div class="tier label6 sort ui-sortable"></div></div><div class="list-group row"><input type="text" value="A" class="tier5 level" readonly><div class="tier label5 sort ui-sortable"></div></div><div class="list-group row"><input type="text" value="B" class="tier4 level" readonly><div class="tier label4 sort ui-sortable"></div></div><div class="list-group row"><input type="text" value="C" class="tier3 level" readonly><div class="tier label3 sort ui-sortable"></div></div><div class="list-group row"><input type="text" value="D" class="tier2 level" readonly><div class="tier label2 sort ui-sortable"></div></div><div class="list-group row last"><input type="text" value="E" class="tier1 level" readonly><div class="tier label1 sort ui-sortable"></div></div>',6),N={id:"char4 row",class:"sort ui-sortable",style:{"padding-top":"25px"}},I=["alt","src"];function C(s,r,l,c,a,i){const o=h("Button");return u(),v("div",x,[g("h1",null,"TIER LIST - "+y(a.listName),1),E,g("div",N,[(u(!0),v(b,null,w(Object.keys(a.images),t=>(u(),v("img",{class:"profile",key:a.images[t].alt,alt:t,src:a.images[t]},null,8,I))),128))]),_(o,{type:"button",label:"Enviar Resultados",icon:"pi pi-check",loading:a.loading,onClick:r[0]||(r[0]=t=>i.sendInformation())},null,8,["loading"])])}const V=f(S,[["render",C]]);export{V as default};
